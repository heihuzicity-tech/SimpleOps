# 远程连接功能测试指南

## 测试环境准备

1. 确保后端服务正常运行
2. 确保前端开发服务器启动
3. 准备测试用的主机资产和凭证

## 功能测试清单

### 1. 导航菜单测试
- [ ] 左侧菜单显示"远程连接"而非"会话管理"
- [ ] 点击"远程连接" -> "主机连接"能正确跳转到 `/connect/hosts`
- [ ] 旧路由 `/sessions/hosts` 能自动重定向到 `/connect/hosts`

### 2. 主机连接页面测试
- [ ] 页面加载正常，显示主机列表
- [ ] 快速访问区域正常显示（初次访问为空）
- [ ] 筛选功能正常：
  - [ ] 系统类型筛选（Linux/Windows）
  - [ ] 连接状态筛选（已连接/未连接）
  - [ ] 文本搜索功能
- [ ] 表格列显示正确：
  - [ ] 主机名称
  - [ ] 主机地址
  - [ ] 系统类型（带图标）
  - [ ] 协议
  - [ ] 关联凭证
  - [ ] 创建时间
  - [ ] 操作按钮

### 3. 连接测试功能
- [ ] 点击"测试"按钮能进行连接测试
- [ ] 测试过程中显示加载状态
- [ ] 测试结果正确显示（成功/失败/延迟）
- [ ] 分层测试正常（ping -> SSH服务测试）

### 4. 凭证选择功能
- [ ] 点击"连接"按钮弹出凭证选择对话框
- [ ] 显示可用凭证列表
- [ ] 关联凭证优先显示并标记
- [ ] 凭证详情正确显示
- [ ] 只有一个凭证时自动选中

### 5. SSH连接功能
- [ ] 选择凭证后能成功创建会话
- [ ] 跳转到独立终端页面 `/connect/terminal/:sessionId`
- [ ] 终端页面正常显示
- [ ] WebSocket连接成功建立
- [ ] 终端交互正常

### 6. 终端页面功能
- [ ] 页面头部显示主机信息
- [ ] 连接状态正确显示
- [ ] 连接时长实时更新
- [ ] 全屏切换功能正常
- [ ] 断开连接功能正常
- [ ] 返回按钮正常工作

### 7. 快速访问功能
- [ ] 连接过的主机会添加到快速访问
- [ ] 快速访问显示最近连接记录
- [ ] 连接次数统计正确
- [ ] 一键重连功能正常
- [ ] 移除记录功能正常
- [ ] 清空所有记录功能正常

## 错误场景测试

### 1. 无凭证场景
- [ ] 没有凭证时显示适当提示
- [ ] 不允许连接操作

### 2. 连接失败场景
- [ ] 主机不可达时显示错误信息
- [ ] SSH服务异常时显示错误信息
- [ ] 凭证错误时显示错误信息

### 3. 会话异常场景
- [ ] 会话创建失败时的处理
- [ ] WebSocket连接失败时的处理
- [ ] 会话中断时的重连机制

## 性能测试

### 1. 页面加载性能
- [ ] 首次加载时间 < 3秒
- [ ] 资产列表渲染流畅
- [ ] 筛选响应速度 < 500ms

### 2. 连接性能
- [ ] 连接测试响应时间合理
- [ ] 终端交互延迟 < 100ms
- [ ] 大量输出时不卡顿

## 浏览器兼容性

- [ ] Chrome (推荐)
- [ ] Firefox
- [ ] Safari
- [ ] Edge

## 移动端适配

- [ ] 响应式布局正常
- [ ] 触摸操作友好
- [ ] 虚拟键盘兼容

## 预期问题和解决方案

### 1. WebSocket连接问题
- 检查后端WebSocket服务是否正常
- 确认端口配置正确（默认8080）
- 检查防火墙设置

### 2. 凭证选择问题
- 确保凭证与资产正确关联
- 检查凭证权限配置

### 3. 路由跳转问题
- 确认前端路由配置正确
- 检查浏览器历史记录状态

## 测试报告模板

```
测试时间：[日期]
测试人员：[姓名]
测试环境：[环境描述]

通过项目：[X/总数]
失败项目：[详细描述]
性能表现：[评价]
建议改进：[具体建议]
```