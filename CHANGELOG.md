# 变更日志

所有对运维堡垒机系统的重要更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划中
- 🎨 前端界面开发 - React + Ant Design
- 🔧 集成测试 - 完整功能测试和性能测试
- 📖 文档完善 - 部署文档和使用手册

## [2.0.0] - 2025-01-13

### 新增
- 🚀 **SSH访问代理系统** - 完整的SSH协议代理实现
  - SSH会话管理和连接池
  - WebSocket支持的实时终端
  - SSH密钥生成和管理
  - 自动清理和状态监控
- 📊 **审计系统** - 全面的操作审计和日志记录
  - 登录日志记录
  - 操作日志记录
  - SSH会话记录
  - 命令执行日志
  - 统计分析功能
- 🖥️ **资产管理模块** - 安全的资产和凭证管理
  - 资产CRUD操作
  - AES-GCM加密的凭证存储
  - 连接测试功能
  - 资产分组管理
- 🔐 **权限系统扩展** - 新增SSH和审计相关权限
  - SSH会话管理权限
  - 审计日志访问权限
  - 凭证管理权限
- 🗄️ **数据库扩展** - 新增审计和SSH相关表结构
  - login_logs表
  - operation_logs表
  - session_records表
  - command_logs表
  - sessions表

### 修复
- 🔧 **AES加密密钥错误** - 修复密钥长度从29字节到32字节
- 🐛 **编译错误修复** - 解决各种技术问题和依赖冲突
- 🔒 **权限验证完善** - 完善的权限检查和访问控制

### 改进
- ⚡ **性能优化** - SSH连接池和审计系统优化
- 📚 **API文档** - 完整的Swagger文档更新
- 🛡️ **安全增强** - 多层次的安全控制和加密保护

### 测试
- ✅ **功能测试** - 所有核心功能测试通过
- ✅ **集成测试** - 各模块集成测试正常
- ✅ **安全测试** - 加密、权限、认证测试通过
- ✅ **实际环境测试** - 真实服务器连接测试通过

## [1.5.0] - 2025-01-12

### 新增
- 👥 **用户管理模块** - 完整的用户管理功能
  - 用户CRUD操作
  - 角色分配和管理
  - 权限系统重构
- 🔑 **权限系统重构** - 从JSON字段重构为独立表结构
  - 独立权限表设计
  - 角色权限关联表
  - 17个系统权限定义
- 📋 **角色管理** - 完整的角色管理功能
  - 角色CRUD操作
  - 权限分配和移除
  - 软删除支持

### 修复
- 🐛 **SQL错误修复** - 解决JSON字段查询导致的SQL错误
- 🔧 **数据一致性** - 使用数据库事务保证数据一致性

### 改进
- ⚡ **查询性能优化** - 权限检查性能提升
- 📚 **API文档完善** - 所有主要接口的详细文档

## [1.0.0] - 2025-01-01

### 新增
- 🎉 **项目正式启动**
- 🏗️ **基础架构搭建** - Go + Gin + GORM + MySQL + Redis
- 🔐 **用户认证系统** - JWT认证和密码安全
- 🗄️ **数据库系统** - 完整的数据库设计和初始化
- 📖 **API文档系统** - Swagger集成和在线调试
- 📋 **完整的需求分析文档**
- 🚀 **MVP快速开始指南**
- 📊 **项目架构图表集**
- ✅ **任务需求一致性检查表**

### 技术特性
- 🔒 **安全特性** - JWT令牌、密码哈希、跨域控制
- 🏗️ **架构设计** - 分层架构、服务层分离
- 📊 **配置管理** - 集中化配置文件系统
- 🗄️ **数据库优化** - 索引优化、连接池配置

### 计划中
- 🔐 用户认证与权限管理系统
- 🖥️ 服务器资产管理功能
- 🔗 SSH访问代理和WebSSH终端
- 📊 操作审计和会话记录

---

### 版本说明
- **v2.0.0**: 核心后端功能完成 - 包含资产管理、SSH代理和审计系统
- **v1.5.0**: 用户管理模块完成 - 完整的用户和权限管理
- **v1.0.0**: 项目基础架构完成 - 认证系统和数据库设计

### 当前系统能力
- ✅ 完整的用户认证和权限管理
- ✅ 资产管理和凭证加密存储
- ✅ SSH代理和会话管理
- ✅ 全面的审计追踪能力
- ✅ REST API和Swagger文档
- ✅ 数据库结构和权限配置
- ✅ 安全的加密和权限控制

系统现已具备完整的后端功能，可以安全地管理用户、资产和SSH访问，并提供全面的审计追踪。下一步将开发前端界面，为用户提供友好的Web管理界面。 