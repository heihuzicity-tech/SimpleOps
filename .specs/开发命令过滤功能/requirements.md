# 开发命令过滤功能 - 需求文档

## 简介
经过详细的代码分析，发现当前系统的设计理念与前端期望存在差异：
- **后端设计**：命令直接在命令组中定义（command_group_items表），不存在独立的命令表
- **前端期望**：期待有独立的命令管理功能，命令可以被多个命令组引用

前端尝试访问的 `/command-filter/commands` API在后端未实现，是因为后端采用了不同的数据模型设计。

## 需求

### 需求 1：理解并适配现有数据模型
**用户故事：** 作为开发者，我需要理解后端的设计理念并让前端适配这种模式
#### 接受标准
1. WHEN 前端需要管理命令时 THEN 应该通过命令组来管理命令项
2. WHEN 显示命令列表时 THEN 应该显示所有命令组中的命令项
3. IF 需要独立的命令管理 THEN 可以考虑创建"未分组命令"这样的特殊命令组

### 需求 2：提供命令项查询API（新增）
**用户故事：** 作为前端应用，我需要能够查询系统中所有的命令项
#### 接受标准
1. WHEN 前端请求 GET `/command-filter/commands` THEN 后端 SHALL 返回所有命令组中的命令项列表
2. WHEN 返回命令项时 THEN 应包含所属命令组的信息
3. IF 需要去重 THEN 可以按内容去重显示唯一的命令

### 需求 3：完善现有API响应格式
**用户故事：** 作为前端开发者，我需要确保API响应包含足够的信息
#### 接受标准
1. WHEN 获取命令组列表时 THEN 响应应包含每个组的命令项详情
2. WHEN 获取命令组详情时 THEN 应返回完整的命令项信息
3. IF 前端需要命令统计 THEN API应提供相应的统计接口

### 需求 4：前端适配方案
**用户故事：** 作为前端开发者，我需要调整界面以适应后端的数据模型
#### 接受标准
1. WHEN 显示"命令列表"标签页时 THEN 可以显示所有命令组的展开视图
2. WHEN 需要添加命令时 THEN 引导用户创建或选择命令组
3. IF 用户需要独立命令 THEN 可以创建专门的"常用命令"组

### 需求 5：可选的架构改进
**用户故事：** 作为架构师，我需要评估是否需要重构为独立的命令表
#### 接受标准
1. IF 决定添加独立命令表 THEN 需要考虑向后兼容性
2. WHEN 实现独立命令表时 THEN 需要提供数据迁移方案
3. IF 保持现有设计 THEN 需要完善文档说明设计理念