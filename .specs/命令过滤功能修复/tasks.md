# 命令过滤功能修复 - 实施计划

## 最新进度
**当前状态**: In Progress
**当前任务**: 完成任务6.3（添加删除确认对话框），待继续任务6.4
**最后更新**: 2025-01-03 00:30

## 任务列表

- [x] 1. 修复命令组编辑显示问题
  - [x] 1.1 修改 CommandGroupManagement 组件的 handleEdit 方法
    - 添加 API 调用获取命令组详情
    - 确保 items 数据正确加载到 commandItems 状态
    - _需求: 1.1, 1.3_
  - [x] 1.2 创建获取命令组详情的 API 方法
    - 在 commandFilterService 中添加 getCommandGroupDetail 方法
    - 处理响应数据适配
    - _需求: 1.1, 1.2_
  - [x] 1.3 验证编辑模态框正确显示已添加的命令
    - 确保 Modal 中的命令列表渲染逻辑正确
    - 添加加载状态处理
    - _需求: 1.3, 1.4_

- [x] 2. 优化页面标签结构
  - [x] 2.1 更新 CommandFilterPage 标签页
    - 添加命令列表标签页
    - 调整标签顺序：命令策略、命令列表、命令组
    - _需求: 2.1, 2.2, 2.4_
  - [x] 2.2 创建 CommandListManagement 组件
    - 实现命令列表表格展示
    - 添加 CRUD 操作功能
    - _需求: 2.3, 3.1_

- [x] 3. 优化命令列表界面
  - [x] 3.1 实现命令列表表格组件
    - 创建表格列配置（命令名称、类型、提示内容、操作）
    - 实现分页功能
    - 添加搜索功能
    - _需求: 3.1, 3.2, 3.4_
  - [x] 3.2 添加命令编辑模态框
    - 创建命令表单组件
    - 实现表单验证
    - _需求: 3.2, 3.3_
  - [x] 3.3 实现空状态提示
    - 设计空状态 UI
    - 添加引导用户创建的提示
    - _需求: 3.5_

- [x] 4. 优化命令组界面
  - [x] 4.1 重构命令组表格显示
    - 调整表格列（组名、创建时间、描述、操作）
    - 实现展开行显示命令详情
    - _需求: 4.1, 4.2_
  - [x] 4.2 改进命令组编辑弹窗
    - 优化表单布局
    - 改进命令选择交互
    - _需求: 4.3, 4.5_
  - [x] 4.3 添加批量操作功能
    - 实现多选功能
    - 添加批量删除操作
    - _需求: 4.4_

- [x] 5. 实现过滤规则向导式配置
  - [x] 5.1 创建步骤式向导组件
    - 使用 Steps 组件实现进度指示
    - 实现步骤间导航逻辑
    - _需求: 5.1, 5.6_
  - [x] 5.2 实现基本信息步骤
    - 创建基本信息表单
    - 添加表单验证
    - _需求: 5.1_
  - [x] 5.3 实现命令/命令组关联步骤
    - 创建双栏选择器组件
    - 实现搜索和筛选功能
    - _需求: 5.2, 5.3, 5.4_
  - [x] 5.4 实现用户/用户组关联步骤
    - 复用双栏选择器组件
    - 添加用户搜索功能
    - _需求: 5.2, 5.3, 5.4_
  - [x] 5.5 实现资源关联步骤
    - 创建资源选择组件
    - 实现主机和凭证选择
    - _需求: 5.2, 5.3, 5.4_
  - [x] 5.6 添加规则摘要确认步骤
    - 显示所有配置的摘要信息
    - 实现保存功能
    - _需求: 5.5, 5.6_

- [ ] 6. 改进交互体验
  - [x] 6.1 添加操作加载状态
    - 为所有异步操作添加 loading 状态
    - 使用 Spin 或 Button loading 属性
    - _需求: 6.1_
  - [x] 6.2 实现操作反馈提示
    - 使用 message 组件显示成功/失败提示
    - 统一提示文案规范
    - _需求: 6.2, 6.3_
  - [x] 6.3 添加删除确认对话框
    - 使用 Modal.confirm 实现二次确认
    - 显示删除影响说明
    - _需求: 6.4_
  - [ ] 6.4 实现表单实时验证
    - 添加 onBlur 验证
    - 显示清晰的错误提示
    - _需求: 6.5_

- [ ] 7. 测试和优化
  - [ ] 7.1 编写单元测试
    - 测试命令组编辑功能
    - 测试新组件功能
    - 覆盖关键业务逻辑
    - _需求: 1.1, 2.1, 3.1, 4.1, 5.1_
  - [ ] 7.2 进行集成测试
    - 测试完整的用户操作流程
    - 验证数据持久化
    - 测试错误处理
    - _需求: 所有_
  - [ ] 7.3 性能优化
    - 实现列表虚拟滚动
    - 添加搜索防抖
    - 优化大数据量渲染
    - _需求: 2.1, 3.1, 4.1_

## 进度摘要
- **总任务数**: 27
- **已完成**: 20
- **进行中**: 0