# 命令过滤功能修复 - 需求文档

## 简介
本功能旨在修复堡垒机系统中命令过滤功能的现有问题，包括命令组编辑时无法显示已添加命令的bug，以及优化整体界面布局，提供更好的用户体验。

## 需求列表

### 需求 1：修复命令组编辑显示问题
**用户故事：** 作为系统管理员，我希望在编辑命令组时能看到之前已添加的命令，以便我可以查看和修改命令组配置
#### 验收标准
1. 当用户点击编辑命令组时，系统应显示该命令组已包含的所有命令
2. 当用户打开编辑对话框时，已选择的命令应在命令列表中被勾选
3. 当命令组包含命令时，编辑界面应正确加载并显示这些命令的选中状态
4. 如果命令组为空，编辑界面应显示空的命令列表

### 需求 2：优化命令策略页面结构
**用户故事：** 作为系统管理员，我希望命令策略页面采用标签页形式，通过三个独立的标签页来管理命令策略、命令列表和命令组
#### 验收标准
1. 当用户访问命令策略页面时，页面应显示三个标签页
2. 三个标签页应分别为：命令策略（过滤规则）、命令列表、命令组
3. 每个标签页都是独立的完整页面，有各自的功能和操作
4. 标签页切换应流畅，保持用户的操作上下文

### 需求 3：优化命令列表界面
**用户故事：** 作为系统管理员，我希望命令列表采用表格形式展示，以便我可以清晰查看所有命令及其类型
#### 验收标准
1. 命令列表应以表格形式展示，包含列：命令名称、命令类型、提示内容、操作
2. 每个命令应显示编辑和删除操作按钮
3. 表格顶部应有"新建"按钮用于添加新命令
4. 表格应支持分页功能，默认每页显示10条记录
5. 当没有命令时，应显示空状态提示

### 需求 4：优化命令组界面
**用户故事：** 作为系统管理员，我希望命令组界面能清晰展示组名、创建时间和包含的命令，以便我可以有效管理命令组
#### 验收标准
1. 命令组列表应以表格形式展示，包含列：命令组名称、创建时间、描述、操作
2. 点击命令组名称应能展开显示该组包含的所有命令
3. 每个命令组应有编辑和删除操作按钮
4. 表格顶部应有"新建"按钮用于创建新命令组
5. 编辑命令组时应使用弹窗形式，显示组名输入框和命令多选列表

### 需求 5：优化过滤规则界面
**用户故事：** 作为系统管理员，我希望过滤规则界面采用向导式设计，以便我可以逐步配置复杂的过滤策略
#### 验收标准
1. 过滤规则创建应采用步骤式向导，包含：基本信息、关联命令/命令组、关联用户/用户组、关联资源凭证
2. 每个步骤应有清晰的进度指示器
3. 在关联步骤中，应提供左右双栏选择器，支持批量添加和移除
4. 已选择项应在右侧列表中显示，支持搜索和删除
5. 向导应支持上一步、下一步导航，以及取消和保存功能
6. 完成配置后应显示规则摘要供用户确认

### 需求 6：改进整体交互体验
**用户故事：** 作为系统管理员，我希望界面操作流畅且有即时反馈，以便我可以高效完成配置任务
#### 验收标准
1. 所有添加、编辑、删除操作应有加载状态提示
2. 操作成功后应显示成功消息提示
3. 操作失败时应显示具体错误信息
4. 删除操作前应有二次确认对话框
5. 表单验证应实时进行，错误信息应清晰显示在相应字段下方