# 命令审计批量删除功能 - 需求文档

## 功能简介
本功能旨在为系统管理员提供批量删除命令审计记录的能力，参考现有会话审计页面的批量删除功能设计和样式。目前会话审计页面已经实现了批量删除功能，但命令审计页面（命令记录页面）尚未实现此功能。管理员需要能够通过复选框选择多条命令记录，并进行批量删除操作。

## 需求列表

### 需求 1：批量选择命令记录
**用户故事：** 作为系统管理员，我希望能够在命令记录页面通过复选框批量选择多条命令记录，以便一次性删除多条记录
#### 验收标准
1. 当用户访问命令记录列表页面时，系统应当在表格中启用行选择功能（rowSelection）
2. 当用户点击全选复选框时，系统应当选中当前页面所有命令记录
3. 当用户选择部分记录时，系统应当在批量删除按钮上显示已选择的记录数量
4. 如果用户未选择任何记录，系统应当禁用批量删除按钮并显示提示信息

### 需求 2：批量删除按钮位置和样式
**用户故事：** 作为系统管理员，我希望批量删除按钮的位置和样式与会话审计页面保持一致，以便获得统一的用户体验
#### 验收标准
1. 当用户选择至少一条记录时，系统应当在表格底部显示批量删除按钮
2. 当批量删除按钮显示时，系统应当在按钮旁边显示已选择的记录数量
3. 如果用户选择了记录，系统应当在按钮上显示选中数量，如"批量删除 (5)"
4. 当批量删除按钮位置时，系统应当与分页器保持在同一水平高度（marginTop: -40px）

### 需求 3：删除确认机制
**用户故事：** 作为系统管理员，我希望在执行批量删除前有确认步骤，以防止误删重要的命令审计记录
#### 验收标准
1. 当用户点击批量删除按钮时，系统应当使用Popconfirm组件弹出确认对话框
2. 当确认对话框显示时，系统应当显示"确定要删除这 X 个命令记录吗？"的提示文本
3. 当用户确认删除时，系统应当调用批量删除API并显示成功消息
4. 当用户取消删除操作时，系统应当关闭对话框并保持所有记录不变

### 需求 4：API接口支持
**用户故事：** 作为系统管理员，我需要后端提供批量删除命令日志的API接口，以支持前端的批量删除功能
#### 验收标准
1. 当前端调用批量删除API时，后端应当提供 `/api/audit/command-logs/batch-delete` 接口
2. 当API接收请求时，系统应当验证请求包含命令记录ID数组和删除原因
3. 当API执行删除时，系统应当在数据库事务中批量删除指定的命令记录
4. 当API完成操作时，系统应当返回成功删除的记录数量

### 需求 5：加载状态管理
**用户故事：** 作为系统管理员，我希望在批量删除操作执行时看到明确的加载状态，以了解操作进度
#### 验收标准
1. 当用户确认批量删除时，系统应当在按钮上显示loading状态
2. 当删除操作进行中时，系统应当禁用其他操作按钮避免重复操作
3. 当删除操作完成时，系统应当隐藏loading状态并显示成功提示
4. 如果删除操作失败，系统应当显示错误消息并恢复按钮状态